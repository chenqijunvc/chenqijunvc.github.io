{% comment %}
Auto Image Assignment for Posts
This include assigns images to posts based on:
1. Explicit image property
2. Category-based assignment
3. Sequential fallback based on post index
{% endcomment %}

{% assign post_image = '' %}

{% comment %} First check if post has explicit image {% endcomment %}
{% if include.post.image %}
  {% assign post_image = include.post.image %}
{% elsif include.post.background %}
  {% assign post_image = include.post.background %}
{% else %}
  {% comment %} Auto-assign based on categories or post index {% endcomment %}
  {% assign categories = include.post.categories %}
  
  {% if categories contains 'machine-learning' or categories contains 'ai' %}
    {% assign category_images = '/img/posts/01.jpg,/img/posts/03.jpg,/img/posts/05.jpg' | split: ',' %}
  {% elsif categories contains 'quantitative-finance' or categories contains 'finance' %}
    {% assign category_images = '/img/posts/02.jpg,/img/posts/04.jpg,/img/posts/06.jpg' | split: ',' %}
  {% elsif categories contains 'data-science' %}
    {% assign category_images = '/img/posts/03.jpg,/img/posts/05.jpg,/img/posts/01.jpg' | split: ',' %}
  {% elsif categories contains 'investment-strategy' or categories contains 'portfolio-management' %}
    {% assign category_images = '/img/posts/04.jpg,/img/posts/06.jpg,/img/posts/02.jpg' | split: ',' %}
  {% else %}
    {% assign category_images = '/img/posts/01.jpg,/img/posts/02.jpg,/img/posts/03.jpg,/img/posts/04.jpg,/img/posts/05.jpg,/img/posts/06.jpg' | split: ',' %}
  {% endif %}
  
  {% comment %} Use post date or title hash to deterministically assign image {% endcomment %}
  {% assign post_hash = include.post.title | size | modulo: category_images.size %}
  {% assign post_image = category_images[post_hash] %}
{% endif %}

{{ post_image }}
