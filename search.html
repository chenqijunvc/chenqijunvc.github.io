---
layout: page
title: Search
description: Search through blog posts and articles.
background: '/img/bg-post.jpg'
---

<div class="row">
  <div class="col-lg-8 col-md-10 mx-auto">
    
    <div class="search-container mb-4">
      <div class="form-group">
        <input type="text" class="form-control form-control-lg" id="search-input" placeholder="Search posts..." autocomplete="off">
      </div>
    </div>

    <div id="search-results">
      <div id="no-results" class="text-center py-5" style="display: none;">
        <i class="fas fa-search fa-3x text-muted mb-3"></i>
        <h3>No Results Found</h3>
        <p class="text-muted">Try different keywords or browse our <a href="{{ '/categories' | relative_url }}">categories</a>.</p>
      </div>

      <div id="search-suggestions" class="text-center py-5">
        <i class="fas fa-lightbulb fa-3x text-muted mb-3"></i>
        <h3>Search Tips</h3>
        <ul class="list-unstyled text-muted">
          <li><strong>Keywords:</strong> machine learning, portfolio, quantitative</li>
          <li><strong>Topics:</strong> AI, finance, data science, investment</li>
          <li><strong>Authors:</strong> Vince Chen</li>
        </ul>
        
        <div class="mt-4">
          <h4>Popular Topics</h4>
          <div class="popular-tags">
            {% assign all_tags = site.posts | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
            {% for tag in all_tags limit:10 %}
              {% if tag != '' %}
                <span class="badge badge-secondary mr-2 mb-2 tag-suggestion" data-tag="{{ tag }}">{{ tag }}</span>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>

      <div id="results-container"></div>
    </div>

  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search-input');
  const resultsContainer = document.getElementById('results-container');
  const noResults = document.getElementById('no-results');
  const suggestions = document.getElementById('search-suggestions');
  const tagSuggestions = document.querySelectorAll('.tag-suggestion');

  // Sample posts data (in a real implementation, this would be generated by Jekyll)
  const posts = [
    {% for post in site.posts %}
    {
      title: {{ post.title | jsonify }},
      url: {{ post.url | relative_url | jsonify }},
      date: {{ post.date | date: '%B %d, %Y' | jsonify }},
      excerpt: {{ post.excerpt | strip_html | truncatewords: 20 | jsonify }},
      categories: {{ post.categories | jsonify }},
      tags: {{ post.tags | jsonify }},
      content: {{ post.content | strip_html | truncatewords: 100 | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  function performSearch(query) {
    if (!query || query.length < 2) {
      showSuggestions();
      return;
    }

    const results = posts.filter(post => {
      const searchText = [
        post.title,
        post.excerpt,
        post.content,
        post.categories.join(' '),
        post.tags.join(' ')
      ].join(' ').toLowerCase();
      
      return searchText.includes(query.toLowerCase());
    });

    displayResults(results, query);
  }

  function displayResults(results, query) {
    suggestions.style.display = 'none';
    
    if (results.length === 0) {
      noResults.style.display = 'block';
      resultsContainer.innerHTML = '';
      return;
    }

    noResults.style.display = 'none';
    
    const resultsHtml = results.map(post => `
      <article class="post-preview">
        <a href="${post.url}">
          <h3 class="post-title">${highlightText(post.title, query)}</h3>
          <h4 class="post-subtitle">${highlightText(post.excerpt, query)}</h4>
        </a>
        <p class="post-meta">
          <i class="far fa-calendar-alt"></i> ${post.date}
          ${post.tags.length > 0 ? `
          <span class="mx-2">â€¢</span>
          <i class="fas fa-tags"></i>
          ${post.tags.slice(0, 3).map(tag => `<span class="badge badge-light">${tag}</span>`).join(' ')}
          ` : ''}
        </p>
      </article>
      <hr>
    `).join('');

    resultsContainer.innerHTML = resultsHtml;
  }

  function highlightText(text, query) {
    const regex = new RegExp(`(${query})`, 'gi');
    return text.replace(regex, '<mark>$1</mark>');
  }

  function showSuggestions() {
    suggestions.style.display = 'block';
    noResults.style.display = 'none';
    resultsContainer.innerHTML = '';
  }

  // Search functionality
  searchInput.addEventListener('input', function(e) {
    performSearch(e.target.value);
  });

  // Tag suggestions
  tagSuggestions.forEach(tag => {
    tag.addEventListener('click', function() {
      const tagText = this.getAttribute('data-tag');
      searchInput.value = tagText;
      performSearch(tagText);
    });
  });

  // Show suggestions by default
  showSuggestions();
});
</script>

<style>
.search-container .form-control {
  border-radius: 50px;
  padding: 12px 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  border: 2px solid #dee2e6;
  transition: all 0.3s ease;
}

.search-container .form-control:focus {
  border-color: #007bff;
  box-shadow: 0 4px 20px rgba(0,123,255,0.15);
}

.tag-suggestion {
  cursor: pointer;
  transition: all 0.3s ease;
}

.tag-suggestion:hover {
  background-color: #007bff !important;
  color: white !important;
  transform: translateY(-1px);
}

.popular-tags {
  text-align: center;
}

mark {
  background-color: #fff3cd;
  padding: 1px 3px;
  border-radius: 2px;
}

.post-meta i {
  margin-right: 0.25rem;
}
</style>
